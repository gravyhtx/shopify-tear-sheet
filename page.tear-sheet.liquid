<-- Create a template called "page.tear-sheet.liquid" -->

{% layout 'tear_sheet' %}

<style>
  
  @page {
    size: auto;
    margin: 0;
    @page :footer {
        display: none
    }
  
    @page :header {
        display: none
    }
  }
  
  @media print {
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      align-items: center;
      justify-content: center;
      text-align: center
    }
    .title {
      padding: 0 20px 0 0;
    }

  }
  
  main {
    font-family: Montserrat, Calibri, sans-serif;
    text-align: center;

  }
  
  .logo-div {
    position: -webkit-sticky;
  	position: sticky;
  }
  
  .logo {
    max-width: 200px;
    max-height: 200px;
    margin-top: 10px;
	display: -webkit-block;

  	display: block;
  	margin-left: auto;
  	margin-right: auto;
  }

  .feat {
    height: 400px;
    max-width: 550px;
    position: static;
  }

  .title {
    font-size: 20px;
    margin-bottom: 12px;
    font-weight: 200;
    position: relative;
    width:100%;
  }

  .price {
    font-size: 15px;
    font-weight: 200;
    position: static;
  }

  .desc {
    font-size: 13px;
    font-weight: 200;
    padding-left: -75px;
    padding-right: -75px;
    text-align:center;
    background-position: bottom 45px
      position: static;
    width: 100%
  }

  footer {
    /*     position: absolute;
    bottom: 0; */
    height: 50px;
    width: 100%;
    text-align: center;
    font-weight: medium;
    font-size: 12px;

  }

</style>
  

  <br><br>
  <img class="logo" id="logo" src="https://cdn.shopify.com/s/files/1/0439/2868/2653/files/MOXIE_LOGO.png?v=1600200105">
  <br><br><br><br>

  <div id="print-info">
  	<img class="feat" id="sheet-image">
    <br><br>
    <div style="margin: 20px !important"></div>
    <div class="title" id="sheet-title"></div>
    <div style="margin: 10px !important"></div>
    <div style="font-size:14px; margin-bottom:2px; !important" id="sheet-sku"></div>
    <div style="font-size:14px" id="sheet-dimens"></div>
    <br>
    <div class="price" id="sheet-price"></div>
  </div>

<footer class="foot" id="foot">2031 West Alabama Street, Houston, Texas 77098 &nbsp;. &nbsp;713.636.2340 &nbsp;. &nbsp;info@moxie-interiors.com</footer>


<script>
  
  
//////// GET ELEMENTS ////////

  // PRODUCT ID
    console.log(prodIdUrl)
    

    // GET TITLE
      const sheetTitleId = "title" + prodId;
      const sheetTitle = localStorage.getItem(sheetTitleId)
      console.log(sheetTitle)

//     // GET DESCRIPTION
//       const sheetDescId = prodId + "description";
//       const sheetDesc = localStorage.getItem(sheetDescId)
//       console.log(sheetDesc)

    // GET IMAGE
      const sheetImgId = "image" + prodId;
      const sheetImg = localStorage.getItem(sheetImgId)
      console.log(sheetImg)

    // GET PRICE
      const sheetPriceId = "price" + prodId;
      const sheetPrice = localStorage.getItem(sheetPriceId)
      console.log(sheetPrice)

    // GET SKU
      const sheetSkuId = "sku" + prodId;
      const sheetSku = localStorage.getItem(sheetSkuId)
      console.log(sheetSku)

    // GET DIMENSIONS
      const sheetDimensId = "dimensions" + prodId;
      const sheetDimens = localStorage.getItem(sheetDimensId)
      console.log(sheetDimens)



//////// SET ELEMENTS ////////

    // SET TITLE
      document.getElementById('sheet-title').innerHTML = sheetTitle

    // SET DESCRIPTION
//       document.getElementById('sheet-desc').innerHTML = sheetDesc

    // SET IMAGE
      document.getElementById('sheet-image').src = sheetImg

    // SET PRICE
      if (sheetPrice === "$0.00") {
//         sheetPrice = "PLEASE INQUIRE"
        document.getElementById('sheet-price').innerHTML = "PLEASE INQUIRE FOR PRICING"
      } else {
        document.getElementById('sheet-price').innerHTML = sheetPrice}

    // SET SKU
      document.getElementById('sheet-sku').innerHTML = sheetSku

    // SET DIMENSIONS
      document.getElementById('sheet-dimens').innerHTML = sheetDimens

      
      
      
//////// PRINT WINDOW ////////
      
   var printed = false

   function printPage() {
     window.print();
     printed = true;
   }

  function printTearSheet() {
    window.onload = printPage()
    if (printed === true) {
      setTimeout(function () {
        window.close(); }, 3000);
    }
  }  

//     window.onload = printTearSheet();
  docReady(printTearSheet())
  
  function docReady(e) {
      // see if DOM is already available
//       if (document.readyState === "complete") {
//           // call on next available tick
//           setTimeout(e, 10000);
//       } 
//     else {
    setTimeout(function () {
          document.addEventListener("DOMContentLoaded", e);
    },500);
//       }
  }  
  
  
  // Opera 8.0+
  var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;

  // Firefox 1.0+
  var isFirefox = typeof InstallTrigger !== 'undefined';

  // Safari 3.0+ "[object HTMLElementConstructor]" 
  var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === "[object SafariRemoteNotification]"; })(!window['safari'] || (typeof safari !== 'undefined' && window['safari'].pushNotification));

  // Internet Explorer 6-11
  var isIE = /*@cc_on!@*/false || !!document.documentMode;

  // Edge 20+
  var isEdge = !isIE && !!window.StyleMedia;

  // Chrome 1 - 79
  var isChrome = !!window.chrome && (!!window.chrome.webstore || !!window.chrome.runtime);

  // Edge (based on chromium) detection
  var isEdgeChromium = isChrome && (navigator.userAgent.indexOf("Edg") != -1);

  // Blink engine detection
  var isBlink = (isChrome || isOpera) && !!window.CSS;


  if (isSafari === true) {
    console.log('safari')
    document.getElementById('foot').style.bottom = '0';
    document.getElementById('foot').style.marginBottom = '-25px';
    document.getElementById('foot').style.position = 'fixed';
    document.getElementById('logo').style.marginBottom = '25px';
    document.getElementById('title').style.width = '90%';
    document.style.padding = '10px';
//     document.getElementById('feat').style.maxWidth = '700px';
//     document.getElementById('feat').style.height = '200% !important';
  } else {
    console.log('not safari')
    document.getElementById('foot').style.bottom = '0';
    document.getElementById('foot').style.position = 'fixed';
    document.getElementById('foot').style.marginBottom = '10px';
    document.getElementById('print-info').style.position = 'absolute';
    document.getElementById('print-info').style.top = '50%';
    document.getElementById('print-info').style.left = '50%';
    document.getElementById('print-info').style.transform = 'translate(-50%,-50%)';
    document.getElementById('print-info').style.width = '90%';
//     document.getElementById('feat').style.height = '1000px !important';
//     document.getElementById('feat').style.maxWidth = '100% !important';
  }
  
  
// BOOLEAN VARIABLES
  isFirefox
  isChrome
  isSafari
  isOpera
  isIE
  isEdge
  isEdgeChromium
  isBlink

  
</script>
